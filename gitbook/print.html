<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>OpenBank</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Open Banking documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="services-core/index.html"><strong aria-hidden="true">2.</strong> Core Services</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="services-core/lake.html"><strong aria-hidden="true">2.1.</strong> Lake</a></li><li class="chapter-item expanded "><a href="services-core/vault.html"><strong aria-hidden="true">2.2.</strong> Vault</a></li><li class="chapter-item expanded "><a href="services-core/ledger.html"><strong aria-hidden="true">2.3.</strong> Ledger</a></li></ol></li><li class="chapter-item expanded "><a href="services-usecase/index.html"><strong aria-hidden="true">3.</strong> Usecases Services</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="services-usecase/data-warehouse.html"><strong aria-hidden="true">3.1.</strong> Data Warehouse</a></li><li class="chapter-item expanded "><a href="services-usecase/bco.html"><strong aria-hidden="true">3.2.</strong> Bank Connectors</a></li></ol></li><li class="chapter-item expanded "><a href="storage/index.html"><strong aria-hidden="true">4.</strong> Storage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="storage/primary.html"><strong aria-hidden="true">4.1.</strong> Primary</a></li><li class="chapter-item expanded "><a href="storage/secondary.html"><strong aria-hidden="true">4.2.</strong> Secondary</a></li></ol></li><li class="chapter-item expanded "><a href="api/index.html"><strong aria-hidden="true">5.</strong> API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="api/graphql.html"><strong aria-hidden="true">5.1.</strong> GraphQL</a></li><li class="chapter-item expanded "><a href="api/rest.html"><strong aria-hidden="true">5.2.</strong> REST</a></li><li class="chapter-item expanded "><a href="api/zmtp.html"><strong aria-hidden="true">5.3.</strong> ZMTP</a></li></ol></li><li class="chapter-item expanded "><a href="misc/license.html"><strong aria-hidden="true">6.</strong> License</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="misc/contributors.html">Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OpenBank</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/jancajthaml-openbank" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>OpenBank project aims to provide solution to virtual account management and value transfer in hybrid deployment environment neither pursuing classical bank cores nor crypto approaches but learning from both.</p>
<p>In classical core banking systems the system is usually implemented with stored procedures or database kernel modules to guarantee acidity of data.
In crypto systems on other hand the problem of value transfer is postponed to users of immutable audit log called blockchain.</p>
<h3 id="value-transfer-in-classical-bank-core"><a class="header" href="#value-transfer-in-classical-bank-core">Value transfer in classical bank core</a></h3>
<p>In classical bank core systems all the logic is in domain of data, there are no tiered storages and entities schema is designed in such a way to satisfy all the usecases. The growth and scale is usually done with scaling vertically resulting in data silos with stored procedures. Resiliency and redudancy is done (if done at all) via primary-secondary failover pair. Core &quot;mixes&quot; internal, external and value transaction with tailored workflow for given usecase, for example external active transaction going to internal system is treated as a loosely schemed document with Nostro account being on debit side while Transport account being on credit one, this transaction is then forwarded with inverse signums creating auditable entry while still being transaction between Nostro and Transport resulting in no balance change, worklow itself defines the transaction and balance is derived from that. This workflow is usually non recoverable and non indepotend, that is the reason for existence of &quot;clearing period&quot;. The clearing period usually D+N effectivelly means that bank exports its daily transactions to some tabular format and sends it via FTP or other &quot;file sharing&quot; mechanism to its licensor, that licensors gathers and audits all the transactions and reports / remediates most of the cases where there are discrepencies. Because this approach is also not very stable, &quot;partial automation&quot; was introduces in form of SWIFT and BIC call codes that helps with partitioning of those files sending them via proper chains quicker. Thats why domestic transfer takes different time than international transfer, thats why money are &quot;in the air&quot; where neither sender nor receiver are disponents and thats why there are cases like double spending or zero speeding that are remediated with additional transaction(s) being done via bank. The idea of classical bank was to digitise already existing workflows that banks had before 1997s to support format of ledger, arbitrages and accounting and exchange and synchronisation of books. These systems represent digital representation of their analog counterparts it is not designed to be distributed normalised or unattended. These systemts also contains lot of security and regulatory layers that are not there to make the system itself trusthworthy but for bank to be covered and for bank not to loose its license. Most of the ATMs and credit cards are off grid and offline and contains copy for all the bank accounts and their balances for that given day. This is being updated at the time of clearing, thats why there are limits not only on withdrawals and deposits via ATM but also transfers done from ATM terminal. Again ATM is just visual representation of what would &quot;analog&quot; bank teller do.</p>
<h3 id="value-transfer-in-crypto-based-bank-core"><a class="header" href="#value-transfer-in-crypto-based-bank-core">Value transfer in crypto based bank core</a></h3>
<p>Crypto based bank cores take different approach to classical bank, they do not differentiate between external and internal accounts (they only know internal) they are not aware of the concept of currency, priority or pre/post value dating of the transaction. In crypto bank every bank account is called a wallet and every wallet has its (usually RSA) public and private key pair. When one account wants to transfers some value to other account, new line is added into shared immutable audit log called blockchain. You can imagine blockchain as a finite shared excel sheet where each new transaction appends to next empty row. The transaction from wallet A to wallet B is signed by wallet's A private key while containing encrypted wallet's B public key and added to shared public ledger (audit log also called blockchain). Transactions cannot be canceled they cannot be forwarded and they are constrained to that single file starting from line 0 called &quot;genesis block&quot; creating Nostro wallet representing the system itself. Previously I said that the blockchain contains finite number of rows this is correct to imagine and realise there is finite number of transactions that could be done starting with given genesis block, but is not factually true. In reality that excel sheet has 2 rows at the beginning and new free rows are appended on background, this is called &quot;mining&quot; and there are different approaches to how these rows are created. For example in BTC or LTC type blockchain mechanism called &quot;proof-of-work&quot; is being used, for this shared file to be trusted, it must be impossible (from thermodynamics and physics perspective) to forge those rows and rewrite history, each row contains attribute containing solution to hard math problem, imagine finding large prime numbers, that way everyone can trust that even if the file is public and shared by all, no single entity is able to rewrite history, change balances, resign transactions and publish modified blockchain or forge new blocks. Because this mechanims is costly by principle and because the mining needs to be running at least in a scale where there are always at least one more free block to write next transaction into so the whole system does not halt, every transaction contains fee that goes towards genesis wallet's balance and from that block sucessful addition of new free block yields credit to that wallet which published that block into public blockchain. The more transactions there are in the system the bigger the blockchain grows, more wallets there are in the system the number of wallets that needs to download that blockchain to have local copy grows. There is limited supply of credits (also called tokens) defined at the definition of genesis block. Whatever that block has as a balance, thats the overall number of tokens that will exist in that system. And one day where there are no new free rows to add transaction or size of blockchain is larger than any existing storage capacity the whole system haults. The idea behind blockchain and BTC specifically was that everyone will spin its own genesis block at the time when he/she needs to transfer value anonymously and once that is confirmed the blochain would be scrapped. Thats the decentralised and distributed part from the whitepaper of cryptocurrencies, the actual usage of blockchains is as a store of value, centralised and traded as a valuta with shared public ledger that everyone needs to use, it is non distributed shared ledger with number of credits backed by real value in fiat currency or valuta, crypto coin by itself does not represent any value, it represents auditable entry of IOU.</p>
<h3 id="evaluation"><a class="header" href="#evaluation">Evaluation</a></h3>
<p>Both of these approaches are &quot;wall-to-wall&quot; and none of those provide stable sustainable and constant behaviour that does not degrade with number of accounts, number of transfers or size of the mesh.</p>
<p>This project aims to solve this singular problem with focusing and &quot;reinventing&quot; approaches step by step building foundational and extensible solution that is distributed, trustful, scaleable and can run unattended for several years of decades by design.</p>
<p>It consists of <a href="services-core">three services</a> focusing on core value transfer functionality and <a href="services-usecase">three services</a> showing examples of advanced usecases.</p>
<p>There is no shame in reinventing wheel if it is square, but this IS large problem because we are working with data that must represent feasable and spendeable value in unattended distributed and autonomous system, CAP theorem is a real thing.</p>
<p>Quite often the biggest problems and hardest problems are solved by connecting and interweaving solutions that are not that big or hard when working by themself.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="core-services"><a class="header" href="#core-services">Core Services</a></h1>
<p>There are 3 core services needed to realise value transfer. </p>
<ul>
<li><a href="services-core/vault.html">Vault</a> to have balance</li>
<li><a href="services-core/ledger.html">Ledger</a> to transfer value</li>
<li><a href="services-core/lake.html">Lake</a> to communicate</li>
</ul>
<p>These services use ZMTP 3.0 protocol co communicate between each other both <a href="services-core/vault.html">vault</a> and <a href="services-core/ledger.html">ledger</a> expose REST APIs to manage their respective tenants and answer their capabilities usecases.</p>
<h2 id="capabilities"><a class="header" href="#capabilities">Capabilities</a></h2>
<h3 id="vault"><a class="header" href="#vault">Vault</a></h3>
<p>Can answer what is its balance at given time given the question tenant and identifier.
Can participate in transfer of value and is responsible with promissing, rejecting, commiting or rollbacking of that change.
Holds audit trail for all the balance changes that can be replayed.
Can create and destroy its tenants and identifiers via REST API.</p>
<h3 id="ledger"><a class="header" href="#ledger">Ledger</a></h3>
<p>Can execute transfer between any number of <a href="services-core/vault.html">vaults</a>.
Is itself bound to tenant that doesn't need to be any of tenants that <a href="services-core/vault.html">vaults</a> are part of.
Provides workflow for transfer to be realised in transactional way.
Can create and destroy its tenants via REST API.</p>
<h3 id="lake"><a class="header" href="#lake">Lake</a></h3>
<p>Relays ZMTP messages and provides each entity with its ingress and egress FIFO mailboxes.
Eliminates needs for service discovery.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="lake-1"><a class="header" href="#lake-1">Lake</a></h1>
<p>Before we dive into the technical details, let's discuss what a Lake is and why it is needed?</p>
<p>In value transfer betteween entities A and B (under tenancy T) there needs to be mechanism for communication.</p>
<p>Because both <a href="services-core/ledger.html">ledgers</a> and <a href="services-core/vault.html">vaults</a> could come to existence or cease to exist in runtime and because we are in a distributed system there needs to be entity that relay's those requests, this relay also needs to be stichable to allow routing.</p>
<p>In short lake:</p>
<ul>
<li>transforms broadcast requests to entity queue</li>
<li>transforms push requests to tenant broadcast</li>
<li>enables indirect communication, blackboxing locality</li>
</ul>
<h2 id="value-transfer-capabilities"><a class="header" href="#value-transfer-capabilities">Value transfer capabilities</a></h2>
<p>Lake is purely technical mechanism to allow other entities to communicate. It serves as a proxy for ZMTP messages and allows every entity that wants to communicate to connect instead of needing to bind. Eliminates necessity for service discovery (and possible topology state diverge).</p>
<p>There is always needs to be lake with two deterministic and configurable ports that entities can connect to.</p>
<h2 id="usecase-capabilities"><a class="header" href="#usecase-capabilities">Usecase capabilities</a></h2>
<p>Any number of <a href="services-core/vault.html">vaults</a> with any number of <a href="services-core/ledger.html">ledgers</a> can participate in value transfer without knowing of each other existence of locality upfront.</p>
<h2 id="persistence"><a class="header" href="#persistence">Persistence</a></h2>
<p>There is no persistence.</p>
<h2 id="multitenancy"><a class="header" href="#multitenancy">Multitenancy</a></h2>
<p>Tenancy is part of ZMTP protocol syntax and messages are partitioned by tenant by prefix.</p>
<h2 id="apis"><a class="header" href="#apis">APIs</a></h2>
<p>TCP bound ZMTP 3.0 api with NULL security mechanism exposing ZMQ PUSH and ZMQ SUB connections.</p>
<h2 id="multicast-vs-unicast"><a class="header" href="#multicast-vs-unicast">Multicast vs Unicast</a></h2>
<p>There is no support for multicast at the moment.</p>
<h2 id="transport"><a class="header" href="#transport">Transport</a></h2>
<p>Lake can be implemented on any transport. Currently it is implemented on TCP.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vault-1"><a class="header" href="#vault-1">Vault</a></h1>
<p>Before we dive into the technical details, let's discuss what a Vault is and why it is needed?</p>
<p>In value transfer between entities A and B (under tenancy T) there needs to be entities A and B to have a value.</p>
<p>These entities do not transfer the value, they hold it, and can participate in transfer of that value. Every balance change has its unique identifier within linear history, this history can be replayed from beginning and MUST result in same final and intermediate balance, the ordering of balance changes is stable and every change is atomic in terms of walking on directed graph.</p>
<p>In short vault:</p>
<ul>
<li>is finite state machine</li>
<li>owns concept of balance</li>
<li>accepts or rejects change of balance requested via <a href="services-core/ledger.html">ledger</a></li>
<li>has unique id</li>
<li>uses primary storage for persistence</li>
</ul>
<h2 id="value-transfer-capabilities-1"><a class="header" href="#value-transfer-capabilities-1">Value transfer capabilities</a></h2>
<p>In order to be able to transfer value between two parties, an entity needs to have capabilities to:</p>
<ul>
<li>transfer from itself to itself</li>
<li>transfer from itself to another entity</li>
<li>transfer from another entity to itself</li>
</ul>
<p>Vault is in charge of:</p>
<ul>
<li>defining and maintaining entities in tenancy</li>
<li>defining and maintaining capabilities</li>
<li>validating requests for changes of balance</li>
<li>accepting valid requests</li>
<li>rejecting invalid requests</li>
<li>replaying history</li>
<li>finalising non terminal states of self</li>
</ul>
<h2 id="vault-units"><a class="header" href="#vault-units">Vault Units</a></h2>
<p>Vault unit manages account actors.</p>
<p>Account actor lifecycle is represented with following states and transitions</p>
<div style='width:100%; height:128px;'><style type="text/css">svg { width: 100% !important; }</style><svg class="bob" font-family="sans" font-size="14" height="128" width="420" xmlns="http://www.w3.org/2000/svg"><defs><marker id="triangle" markerHeight="8" markerWidth="8" orient="auto" refX="4" refY="2" viewBox="0 0 8 4"><polygon class="fg_fill" points="0,0 0,4 8,2 0,0"/></marker><marker id="clear_triangle" markerHeight="10" markerWidth="10" orient="auto" refX="1" refY="7" viewBox="0 0 20 14"><polygon class="bg_fill" points="2,2 2,12 18,7 2,2"/></marker><marker id="circle" markerHeight="5" markerWidth="5" orient="auto" refX="10" refY="10" viewBox="0 0 20 20"><circle class="fg_fill" cx="10" cy="10" r="8"/></marker><marker id="square" markerHeight="5" markerWidth="5" orient="auto" refX="10" refY="10" viewBox="0 0 20 20"><rect class="fg_fill" height="20" width="20" x="0" y="0"/></marker><marker id="open_circle" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="10" viewBox="0 0 20 20"><circle class="bg_fill" cx="10" cy="10" r="4"/></marker><marker id="big_open_circle" markerHeight="20" markerWidth="20" orient="auto" refX="20" refY="20" viewBox="0 0 40 40"><circle class="bg_fill" cx="20" cy="20" r="6"/></marker></defs><style type="text/css">rect.backdrop {    fill: transparent;}text{    fill: var(--fg);}circle {    fill: none;    stroke: var(--fg);    stroke-width: 2;}line {    stroke: var(--fg);    stroke-width: 2;    stroke-opacity: 1;    fill-opacity: 1;    stroke-linecap: round;    stroke-linejoin: miter;}path {    fill: none;    stroke: var(--fg);    stroke-width: 2;    stroke-opacity: 1;    fill-opacity: 1;    stroke-linecap: round;    stroke-linejoin: miter;}line.dashed {    stroke-dasharray: 5;}.fg_fill {    fill: var(--fg);}.bg_fill {    fill: transparent;    stroke: var(--fg);    stroke-width: 2;}tspan.head{    fill: none;    stroke: none;}    </style><rect class="backdrop" height="128" width="420" x="0" y="0"/><g><line marker-start="url(#triangle)" x1="30" x2="33" y1="56" y2="56"/><line marker-end="url(#triangle)" marker-start="url(#big_open_circle)" x1="15" x2="33" y1="56" y2="56"/></g><g><line x1="36" x2="51" y1="56" y2="56"/></g><g><line x1="51" x2="51" y1="40" y2="72"/><line x1="51" x2="87" y1="40" y2="40"/><line x1="51" x2="87" y1="72" y2="72"/><line x1="87" x2="87" y1="40" y2="72"/></g><g><line x1="87" x2="117" y1="56" y2="56"/><line x1="117" x2="117" y1="28" y2="56"/><line x1="117" x2="117" y1="56" y2="84"/><path d="M 117 84 A 3 3 0 0 0 120 88"/><path d="M 120 24 A 3 3 0 0 0 117 28"/></g><g><line marker-end="url(#triangle)" x1="120" x2="189" y1="24" y2="24"/><line marker-start="url(#triangle)" x1="186" x2="189" y1="24" y2="24"/></g><g><line marker-end="url(#triangle)" x1="120" x2="183" y1="88" y2="88"/><line marker-start="url(#triangle)" x1="180" x2="183" y1="88" y2="88"/></g><g><line x1="186" x2="237" y1="88" y2="88"/></g><g><line x1="192" x2="237" y1="24" y2="24"/></g><g><line x1="237" x2="237" y1="8" y2="40"/><line x1="237" x2="315" y1="8" y2="8"/><line x1="237" x2="315" y1="40" y2="40"/><line x1="315" x2="315" y1="8" y2="40"/></g><g><line x1="237" x2="237" y1="72" y2="104"/><line x1="237" x2="291" y1="72" y2="72"/><line x1="237" x2="291" y1="104" y2="104"/><line x1="291" x2="291" y1="72" y2="104"/></g><g><line x1="291" x2="330" y1="88" y2="88"/></g><g><line x1="315" x2="372" y1="24" y2="24"/><path d="M 375 28 A 3 3 0 0 0 372 24"/></g><g><line marker-start="url(#triangle)" x1="336" x2="333" y1="88" y2="88"/><line marker-end="url(#triangle)" x1="336" x2="333" y1="88" y2="88"/><line x1="336" x2="372" y1="88" y2="88"/><path d="M 372 88 A 3 3 0 0 0 375 84"/></g><g><line x1="375" x2="375" y1="28" y2="84"/></g><g><text x="60.75" y="60">Nil</text></g><g><text x="132.75" y="44">does</text></g><g><text x="132.75" y="76">exists</text></g><g><text x="162.75" y="44">not</text></g><g><text x="186.75" y="44">exist</text></g><g><text x="246.75" y="28">Not</text></g><g><text x="246.75" y="92">Exists</text></g><g><text x="270.75" y="28">Exists</text></g><g><text x="384.75" y="60">create</text></g></svg></div>
<p>Actor process messages sequentially, successful messages produce auditable event in events journal with continuously incrementing counter.
Account actor holds following state in memory:</p>
<ul>
<li>currency</li>
<li>format</li>
<li>balance amount</li>
<li>promised amount</li>
<li>promise buffer</li>
</ul>
<p>Messages are processed as follows:</p>
<h3 id="uncertain-if-exists-or-not"><a class="header" href="#uncertain-if-exists-or-not">Uncertain if Exists or Not</a></h3>
<ul>
<li>actor transitions either to Existing or Non Existing state and replays the message</li>
</ul>
<h3 id="account-does-not-exist"><a class="header" href="#account-does-not-exist">Account Does Not Exist</a></h3>
<ul>
<li><code>CreateAccount</code> if creation of account was successful transitions actor to <code>Exists</code></li>
<li><code>Rollback</code> returns accepted</li>
<li><code>GetAccountState</code> returns account missing</li>
<li>any other message returns error to sender</li>
</ul>
<h3 id="account-exists"><a class="header" href="#account-exists">Account Exists</a></h3>
<ul>
<li><code>GetAccountState</code> returns current actor state to sender</li>
<li><code>Promise</code> is processed as follows
<ul>
<li>if triple (transaction, currency, amount) was already promised, returns already accepted to sender</li>
<li>if transaction currency is different to account currency returns error to sender</li>
<li>if commiting following transaction will put account balance into negative and account does not allow negative balance return error to sender</li>
<li>if after promising the events journal would be saturated prepate new snapshot</li>
<li>otherwise add amount from transfer to self's blocking amount</li>
<li>add triple (transaction, currency, amount) to promise buffer</li>
</ul>
</li>
<li><code>Commit</code> is processed as follows
<ul>
<li>if triple (transaction, currency, amount) was not promised, return error to sender</li>
<li>if after commiting the events journal would be saturated prepate new snapshot</li>
<li>subtract amount of commit from self's blocking amount and add amount of commit to self's balance amount</li>
<li>remove triple (transaction, currency, amount) promise from promise buffer</li>
</ul>
</li>
<li><code>Rollback</code> is processed as follows
<ul>
<li>if triple (transaction, currency, amount) was not promised, return error to sender</li>
<li>if after rollbacking the events journal would be saturated prepate new snapshot</li>
<li>subtract amount of commit from self's blocking amount</li>
<li>remove triple (transaction, currency, amount) promise from promise buffer</li>
</ul>
</li>
<li>any other message returns error to sender</li>
</ul>
<h2 id="vault-rest"><a class="header" href="#vault-rest">Vault Rest</a></h2>
<p>Vault Rest is the application that manages vault units and exposes REST API. Vault Rest is stateless.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ledger-1"><a class="header" href="#ledger-1">Ledger</a></h1>
<p>Before we dive into the technical details, let's discuss what a Ledger is and why it is needed?</p>
<p>In value transfer betteween entities A and B (under tenancy T) there needs to be mechanism that orchestrates the transfer.</p>
<p>This mechanism does not hold the value, it validates it, orchestrates it and finalises it. Every value transfer has its unique identifier within linear history, this history can be replayed from beggining and SHOULD result in same transfers if all the participants of those transfers are in the same states as they were in that time.</p>
<p>In short ledger:</p>
<ul>
<li>validates transfer</li>
<li>negotiates transfer with <a href="services-core/vault.html">vaults</a></li>
<li>owns concept of transfer of value</li>
<li>has unique id</li>
<li>uses primary storage for persistence</li>
</ul>
<h2 id="transactions"><a class="header" href="#transactions">Transactions</a></h2>
<p>Transactions are used to update <a href="services-core/vault.html">vault</a> balances. Ledger is updated by transaction that is recorded in ledger history after the transaction is accepted by all vault included in that transaction. Transactions can be initiated by ledger itself or by another entity.</p>
<p>Transactions are validated by both ledger unit and respective vault units. Every transaction is validated against entity structure (which is defined by vault). If the transaction is valid, negotiation with vaults by each vault promising to accept or give value on their side, if the negotiation is sucessful transaction is committed, otherwise it is rollbacked. If transaction fails in validation or before promising stage is initiated transaction is rejected.</p>
<p>Transactions can be initiated by ledger or by another entity.</p>
<ul>
<li>ledger realise a transaction if vaults can balance out the transaction, i.e. balance of affected vaults is sufficient to cover the transaction</li>
<li>there does not need to be corelation between vault tenancy and ledger tenanct</li>
</ul>
<p>Every transaction is validated by ledger itself and the ledger updates and maintains its own history.</p>
<h2 id="transfer"><a class="header" href="#transfer">Transfer</a></h2>
<p>Transfer is single value transfership between vault A and vault B. Transfers have a unique identifier in context under transaction partition.</p>
<p>All transfers are verified by a number of vault to confirm that the transfer is valid and realisable. Each vault holding part of the balance involved in the transfer. Vaults are identified by their unique identifier.</p>
<p>Transfer is balance changing operation on vault unit. Vault updates its current balances after validation of transfer. If all transfers in transaction are valid, transaction is committed. If any transfer is invalid, whole transaction is rollbacked if there were already some promises, producing auditable event of intent on ledger part, otherwise transaction in rejected.</p>
<p>Transfer is initiated by a ledger rest realised by ledger unit.</p>
<h1 id="ledger-units"><a class="header" href="#ledger-units">Ledger Units</a></h1>
<ul>
<li>is by tenant partitioned unit that contains ledger.</li>
<li>has its unique identifier.</li>
<li>has primary storage that is used by ledger to store its state.</li>
<li>is stateless</li>
<li>sprays workers to realise the transaction workflow.</li>
<li>communicate with vaults in order to realise transfer of value.</li>
<li>participate in transactions, they validate them and if they are valid, they negotiate them with vaults.</li>
<li>are managed by ledger rest.</li>
</ul>
<h1 id="ledger-rest"><a class="header" href="#ledger-rest">Ledger Rest</a></h1>
<p>Ledger rest is the application that manages ledger units and exposes REST API. Ledger rest is stateless.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="usecase-services"><a class="header" href="#usecase-services">Usecase Services</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="data-warehouse"><a class="header" href="#data-warehouse">Data Warehouse</a></h1>
<p>Before we dive into the technical details, let's discuss what a Data Warehouse service is and what purpose does it serve?</p>
<p>Core services do not allow analytics or searching functionalities. Data Warehouse is a example of how to transform raw primary data into indexed secondary data that could be searched.</p>
<p>In short data warehouse:</p>
<ul>
<li>usecase example</li>
<li>single node graphql service</li>
<li>search and analytical service</li>
</ul>
<h2 id="value-transfer-capabilities-2"><a class="header" href="#value-transfer-capabilities-2">Value transfer capabilities</a></h2>
<p>This service has no inherent value in context of core problem but is a proof that you can build your usual usecases based on core foundation.</p>
<h2 id="usecase-capabilities-1"><a class="header" href="#usecase-capabilities-1">Usecase capabilities</a></h2>
<p>Allows to answer question posted to data like &quot;what was the balance and 4th of July for given account&quot; or &quot;give me all transactions from which given account was credited&quot; any any others that schema allows.</p>
<h2 id="persistence-1"><a class="header" href="#persistence-1">Persistence</a></h2>
<p>Data Warehouse uses secondary persistence mirroring primary persistence into something searchable with eventual consistency.</p>
<h2 id="multitenancy-1"><a class="header" href="#multitenancy-1">Multitenancy</a></h2>
<p>Data warehouse sees all tenants, tenancy is just one of available filters.</p>
<h2 id="apis-1"><a class="header" href="#apis-1">APIs</a></h2>
<p>exposes GraphQL API with following schema</p>
<h3 id="scalars"><a class="header" href="#scalars">Scalars</a></h3>
<p><code>BigDecimal</code> represents signed fractional values with arbitrary precision.</p>
<p><code>DateTime</code> represents date and time in yyyy-mm-ddThh:mm:ss format</p>
<p><code>NaturalNumber</code> represents integer including zero</p>
<p><code>Status</code> represents transaction status one of queued, committed or rollbacked</p>
<h3 id="types"><a class="header" href="#types">Types</a></h3>
<p>Virtual Account</p>
<pre><code class="language-graphql">type account {
  tenant: tenant
  name: String!
  format: String!
  currency: String!
  balance: BigDecimal!
}
</code></pre>
<p>A Tenant</p>
<pre><code class="language-graphql">type tenant {
  name: String!
}
</code></pre>
<p>Single transfer from Virtual Account A to Virtual Account B</p>
<pre><code class="language-graphql">type transfer {
  tenant: tenant
  transaction: String!
  transfer: String!
  status: Status!
  credit: account
  debit: account
  currency: String!
  amount: BigDecimal!
  valueDate: DateTime!
}
</code></pre>
<h3 id="queries"><a class="header" href="#queries">Queries</a></h3>
<pre><code class="language-graphql">tenant(
	tenant: String!
): tenant

tenants(
	limit: NaturalNumber!,
	offset: NaturalNumber!
): [tenant!]!

account(
	tenant: String!,
	name: String!
): account
 
accounts(
	tenant: String!,
	currency: String,
	format: String,
	limit: NaturalNumber!,
	offset: NaturalNumber!
): [account!]!

transfers(
	tenant: String!,
	currency: String,
	status: Status,
	amount_lt: BigDecimal,
	amount_lte: BigDecimal,
	amount_gt: BigDecimal,
	amount_gte: BigDecimal,
	valueDate_lt: DateTime,
	valueDate_lte: DateTime,
	valueDate_gt: DateTime,
	valueDate_gte: DateTime,
	limit: NaturalNumber!,
	offset: NaturalNumber!
): [transfer!]!
</code></pre>
<p>there are no mutations implemented, to mutate data one must use REST APIs of <a href="services-usecase/../services-core/vault.html">vault</a> or <a href="services-usecase/../services-core/ledger.html">ledger</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bank-connectors"><a class="header" href="#bank-connectors">Bank Connectors</a></h1>
<p>Before we dive into the technical details, let's discuss what a Bank connection is and what purpose does it serve?</p>
<p>Bank Connector allows to transform transactions done in external system (standard bank core, crypto bank core or any other proprietary variant) into value transfer usecase, creating internal mirror with normalized data allowing to make use of those data with anything built on top of this bank core.</p>
<p>In short bank connector is:</p>
<ul>
<li>usecase example</li>
<li>mirror of value transfers being done in other system</li>
<li>synchronizes and normalizes data</li>
<li>creates transactions and accounts automatically</li>
</ul>
<h2 id="value-transfer-capabilities-3"><a class="header" href="#value-transfer-capabilities-3">Value transfer capabilities</a></h2>
<p>If someone wants to run analytics or just want to simulate what would happen if some transactions were to be made and the originator of that data is closed source or does not allow for such usecases, data will be imported and transformed to represent their intent into value transfers and value owners.</p>
<p>There are currently two examples of bank connectors fio-bco representing value transfers on checking account at FIO Banka a.s. and bondster-bco representing representing value transfers on primary and secondary market with loans, mortgages and other investments providing visibility into profitability of each segments.</p>
<p>Additional not yet existing usecase could be inflation forecast with currency arbitrage if you can imagine inflation being &quot;value taken&quot; and exchanges rates being &quot;value multiplier if value given&quot; you could create millions of transfers exploring all the possible problem spaces with 95th percentile confidence on currency shorting or general arbitrage.</p>
<h2 id="usecase-capabilities-2"><a class="header" href="#usecase-capabilities-2">Usecase capabilities</a></h2>
<p>This service creates accounts and wires transaction automatically to mirror whatever is happening in external system, it will not allow to mirror data that violate the basic principle of value transfer. Account names or transfer ids may or might not be mirrors of ids and names in external data originator, it depends on usecase, intent and system itself.</p>
<p>Having data normalized and having foundational system fast and consistent allows one to imagine any usecase and write any transformation connector if one can define what is &quot;value&quot; and what is &quot;transfer&quot; in that given usecase. It doesn't need to be money at all, it could be for example organic search and site profitability index if value is defined as page view and refferer is defined as creditor and there is decay in form of hourly debetor eating away each &quot;page&quot; balance and &quot;current balance&quot; for given page would be its organic searchability index while &quot;balance at time x or bewteen times x and y&quot; would answer the question of campain's ROI.</p>
<h2 id="persistence-2"><a class="header" href="#persistence-2">Persistence</a></h2>
<p>uses primary persistence for access management, these data are encrypted.</p>
<h2 id="multitenancy-2"><a class="header" href="#multitenancy-2">Multitenancy</a></h2>
<p>Each tenant existing will use same tenant of <a href="services-usecase/../services-core/ledger.html">ledger</a> and <a href="services-usecase/../services-core/vault.html">vault</a> effectivelly encapsulating mirror tenancy, it does not allow cross-perimeter or cross-tenant transactions in given implementations, but there is nothing forbitting this to be enabled if implemented in such a way, core services allow these usecases.</p>
<h2 id="apis-2"><a class="header" href="#apis-2">APIs</a></h2>
<p>Exposes REST API for token management, how the token is created and how it is used depends on each connector, enables to create or delete tenant from REST API.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="storage"><a class="header" href="#storage">Storage</a></h1>
<p>There is no single storage or database solution to solve all usecases when talking about monetary data.</p>
<p>This project separate approach to data persistence with two tiers of storage.</p>
<p><a href="storage/primary.html">Primary storage</a> being suitable for 2 of core services uses file system specifically inodes meta-data space of file system.</p>
<p><a href="storage/secondary.html">Secondary storage</a> on other hand is part of data-warehouse usecase using postgre database and is suitable for corellation non atomic search usecases.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="primary-storage"><a class="header" href="#primary-storage">Primary Storage</a></h1>
<p>Primary persistence is realised via nix inodes based filesystem.</p>
<p>Inodes metadata space is used instead of contets to reduce number of operations needed to be done in FS by half while not needed filedescriptor to be opened for reading or writing, the mere existance of file descriptor gives us most of the information that we need, reducing the blocking period.</p>
<p>All primary storage operations are blocking and locking using respective file descriptor flags.</p>
<p>Storage is not mirrored into memory, files are partitioned in such a way that each state transition of <a href="storage/../services-core/vault.html">vault</a> and worfklow operation of <a href="storage/../services-core/ledger.html">ledger</a> maps to fully qualified filename.</p>
<p>There are some data stored in files in either plainext or encrypted for but the content actual is TEXT based not BINARY.</p>
<h2 id="encryption"><a class="header" href="#encryption">Encryption</a></h2>
<p>When using encryption, all contents of files are encrypted using a master key that is a random 2048 bytes generated at installation time using a urandom source.</p>
<p>Inode data are never encrypted.</p>
<h2 id="vault-storage-shape"><a class="header" href="#vault-storage-shape">Vault storage shape</a></h2>
<h3 id="general-storage-shape"><a class="header" href="#general-storage-shape">General storage shape</a></h3>
<ul>
<li>Tenant A <code>/t_A</code></li>
<li>Account B of Tenant A <code>/t_A/account/B</code></li>
<li>Snapshot version 3 of Account B of Tenant A <code>/t_A/account/B/snaphost/0000000003</code></li>
<li>Events of Account B of Tenant A starting from Snapshot version 3 <code>/t_A/account/B/events/0000000003</code></li>
</ul>
<h3 id="events-and-snapshots"><a class="header" href="#events-and-snapshots">Events and Snapshots</a></h3>
<p>Each account persists its events under <code>/t_{tenant}/account/{account}/events/{version}</code> namespace upto maximum number of event per snapshot configured.</p>
<p>When this number is reached, consolidation of balances at terminal state with list or request IDs in non-terminal states is written into next version of snapshot incrementing current version by one. All followup event are then peristed into tat new namespace.</p>
<p>When vault unit starts it hydrates its intermediate state from latest snapshot and followup event data.</p>
<p>All events are write exclusive, event files do not have a content.</p>
<p>Snapshot content follows given schema</p>
<pre><code>???
</code></pre>
<h3 id="state-transition"><a class="header" href="#state-transition">State transition</a></h3>
<p>There are three events that vault is aware of</p>
<ul>
<li><code>0</code> promise as a starting state</li>
<li><code>1</code> commit as a successful terminal state </li>
<li><code>2</code> rollback as a unsuccessful terminal state </li>
</ul>
<p>If Account A of Tenant T with Snapshot version 1 promises to give or reveive value V based on the request R the following event is persisted</p>
<p><code>/t_T/account/A/events/0000000001/0_V_R</code></p>
<p>If Account A of Tenant T with Snapshot version 1 commits transfer of value V based on the request R the following event is persisted</p>
<p><code>/t_T/account/A/events/0000000001/1_V_R</code></p>
<p>If Account A of Tenant T with Snapshot version 1 rollbacks transfer of value V based on the request R the following event is persisted</p>
<p><code>/t_T/account/A/events/0000000001/2_V_R</code></p>
<h2 id="ledger-storage-shape"><a class="header" href="#ledger-storage-shape">Ledger storage shape</a></h2>
<blockquote>
<p>TBD</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="secondary-storage"><a class="header" href="#secondary-storage">Secondary Storage</a></h1>
<p>Secondary persistence is used in <a href="storage/../services-usecase/data-warehouse.html">data-warehouse</a> usecase example using Postgre type relationship database.</p>
<p>Relationship view on data allowing search capabilities is eventually done with microbatches of <a href="storage/../services-usecase/data-warehouse.html">data-warehouse</a>.</p>
<h2 id="capabilities-1"><a class="header" href="#capabilities-1">Capabilities</a></h2>
<blockquote>
<p>TBD</p>
</blockquote>
<h2 id="schema"><a class="header" href="#schema">Schema</a></h2>
<blockquote>
<p>TBD </p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="api"><a class="header" href="#api">API</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="graphql"><a class="header" href="#graphql">GraphQL</a></h1>
<p>GraphQL is a declarative, strongly typed language for requesting and manipulating data developed by Facebook in 2012.</p>
<p>You can use GraphQL to query data from a server in the form of a JSON object. The GraphQL query consists of fields and objects. A field is the name of something you want to retrieve from the server. An object is a name/value pair that describes the field.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rest"><a class="header" href="#rest">REST</a></h1>
<p>The best way to understand how REST works is by thinking on a RESTful Web Service. The Web Service will expose its functionality through HTTP methods (GET, POST, PUT, DELETE) that can be used by the client to perform requests.</p>
<p>RESTful service is defined by resource that it wants to expose, that resource defines the URL that you will use to access the resource, and the HTTP methods that will be used to perform requests.</p>
<h2 id="manage-tenancy"><a class="header" href="#manage-tenancy">Manage tenancy</a></h2>
<h3 id="get-tenant-ids"><a class="header" href="#get-tenant-ids">Get Tenant IDs</a></h3>
<p>Request:</p>
<pre><code>GET /tenant
</code></pre>
<p>Response:</p>
<pre><code class="language-json">200 OK
[
	&quot;tenant-id&quot;
]
</code></pre>
<h3 id="create-tenant"><a class="header" href="#create-tenant">Create Tenant</a></h3>
<p>Request:</p>
<pre><code>POST /tenant/{tenant-id}
</code></pre>
<p>Response:</p>
<pre><code class="language-json">200 OK
</code></pre>
<h3 id="delete-tenant"><a class="header" href="#delete-tenant">Delete Tenant</a></h3>
<p>Request:</p>
<pre><code>DELETE /tenant/{tenant-id}
</code></pre>
<p>Response:</p>
<pre><code class="language-json">200 OK
</code></pre>
<h2 id="account-usecase"><a class="header" href="#account-usecase">Account Usecase</a></h2>
<h3 id="get-account-ids"><a class="header" href="#get-account-ids">Get Account IDs</a></h3>
<p>Request:</p>
<pre><code>GET /account/{tenant-id}
</code></pre>
<p>Response:</p>
<pre><code class="language-json">200 OK
[
	&quot;account-id&quot;
]
</code></pre>
<h3 id="get-account-state"><a class="header" href="#get-account-state">Get Account State</a></h3>
<p>Request:</p>
<pre><code>GET /account/:tenant-id/:account-id
</code></pre>
<p>Response:</p>
<pre><code class="language-json">200 OK
{
	&quot;format&quot;: &quot;account-format&quot;,
    &quot;currency&quot;: &quot;account-currency&quot;,
    &quot;balance&quot;: &quot;0.0&quot;,
    &quot;blocking&quot;: &quot;0.0&quot;,
    &quot;isBalanceCheck&quot;: false
}
</code></pre>
<h3 id="create-account"><a class="header" href="#create-account">Create Account</a></h3>
<pre><code class="language-json">POST /account/:tenant-id
{
	&quot;name&quot;: &quot;account-id&quot;,
	&quot;format&quot;: &quot;account-format&quot;,
	&quot;currency&quot;: &quot;account-currency&quot;,
	&quot;isBalanceCheck&quot;: true
}
</code></pre>
<h2 id="transaction-usecases"><a class="header" href="#transaction-usecases">Transaction Usecases</a></h2>
<h3 id="get-transaction-ids"><a class="header" href="#get-transaction-ids">Get Transaction IDs</a></h3>
<p>Request:</p>
<pre><code>GET /transaction/:tenant-id
</code></pre>
<p>Response:</p>
<pre><code class="language-json">200 OK
[
	&quot;transaction-id&quot;
]
</code></pre>
<h3 id="create-transaction"><a class="header" href="#create-transaction">Create Transaction</a></h3>
<pre><code class="language-json">POST /transaction/:tenant-id
{
    &quot;transfers&quot;: [
      {
        &quot;credit&quot;: {
          &quot;tenant&quot;: &quot;credit-tenant&quot;,
          &quot;name&quot;: &quot;credit-account&quot;
        },
        &quot;debit&quot;: {
          &quot;tenant&quot;: &quot;debit-tenant&quot;,
          &quot;name&quot;: &quot;debit-account&quot;
        },
        &quot;amount&quot;: &quot;1&quot;,
        &quot;currency&quot;: &quot;transfer-currency&quot;
      }
    ]
}
</code></pre>
<p>Response:</p>
<pre><code class="language-json">200 OK
transaction-id
</code></pre>
<h3 id="get-transaction-state"><a class="header" href="#get-transaction-state">Get Transaction State</a></h3>
<pre><code class="language-json">GET /transaction/:tenant-id/:transaction-id
</code></pre>
<p>Response:</p>
<pre><code class="language-json">200 OK
{
    &quot;id&quot;: &quot;transaction-id&quot;,
    &quot;status&quot;: &quot;committed&quot;,
    &quot;transfers&quot;: [
      {
        &quot;id&quot;: &quot;transfer-id&quot;,
        &quot;valueDate&quot;: &quot;2015-03-04T17:08:22Z&quot;,
        &quot;credit&quot;: {
          &quot;tenant&quot;: &quot;credit-tenant&quot;,
          &quot;name&quot;: &quot;credit-account&quot;
        },
        &quot;debit&quot;: {
          &quot;tenant&quot;: &quot;debit-tenant&quot;,
          &quot;name&quot;: &quot;debit-account&quot;
        },
        &quot;amount&quot;: &quot;0.00000000000000000000000000000000000000000000000000000000001&quot;,
        &quot;currency&quot;: &quot;transfer-currency&quot;
      }
    ]
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="zmtp"><a class="header" href="#zmtp">ZMTP</a></h1>
<p>ZMTP 3.0 is a protocol that defines how nodes can communicate with each other. </p>
<h2 id="zss"><a class="header" href="#zss">ZSS</a></h2>
<p>ZSS defines methods for message encryption and authentication for ZeroMQ. It is a very simple protocol that can be used to secure messages exchanged between two or more nodes.</p>
<p>In current implementation NULL security protocol is used.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="license"><a class="header" href="#license">License</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="for-contributors"><a class="header" href="#for-contributors">For Contributors</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
