# Introduction

OpenBank project aims to provide solution to virtual account management and value transfer in hybrid deployment environment neither pursuing classical bank cores nor crypto approaches but learning from both.

In classical core banking systems the system is usually implemented with stored procedures or database kernel modules to guarantee acidity of data.
In crypto systems on other hand the problem of value transfer is postponed to users of immutable audit log called blockchain.

### Value transfer in classical bank core

In classical bank core systems all the logic is in domain of data, there are no tiered storages and entities schema is designed in such a way to satisfy all the usecases. The growth and scale is usually done with scaling vertically resulting in data silos with stored procedures. Resiliency and redudancy is done (if done at all) via primary-secondary failover pair. Core "mixes" internal, external and value transaction with tailored workflow for given usecase, for example external active transaction going to internal system is treated as a loosely schemed document with Nostro account being on debit side while Transport account being on credit one, this transaction is then forwarded with inverse signums creating auditable entry while still being transaction between Nostro and Transport resulting in no balance change, worklow itself defines the transaction and balance is derived from that. This workflow is usually non recoverable and non indepotend, that is the reason for existence of "clearing period". The clearing period usually D+N effectivelly means that bank exports its daily transactions to some tabular format and sends it via FTP or other "file sharing" mechanism to its licensor, that licensors gathers and audits all the transactions and reports / remediates most of the cases where there are discrepencies. Because this approach is also not very stable, "partial automation" was introduces in form of SWIFT and BIC call codes that helps with partitioning of those files sending them via proper chains quicker. Thats why domestic transfer takes different time than international transfer, thats why money are "in the air" where neither sender nor receiver are disponents and thats why there are cases like double spending or zero speeding that are remediated with additional transaction(s) being done via bank. The idea of classical bank was to digitise already existing workflows that banks had before 1997s to support format of ledger, arbitrages and accounting and exchange and synchronisation of books. These systems represent digital representation of their analog counterparts it is not designed to be distributed normalised or unattended. These systemts also contains lot of security and regulatory layers that are not there to make the system itself trusthworthy but for bank to be covered and for bank not to loose its license. Most of the ATMs and credit cards are off grid and offline and contains copy for all the bank accounts and their balances for that given day. This is being updated at the time of clearing, thats why there are limits not only on withdrawals and deposits via ATM but also transfers done from ATM terminal. Again ATM is just visual representation of what would "analog" bank teller do.

### Value transfer in crypto based bank core

Crypto based bank cores take different approach to classical bank, they do not differentiate between external and internal accounts (they only know internal) they are not aware of the concept of currency, priority or pre/post value dating of the transaction. In crypto bank every bank account is called a wallet and every wallet has its (usually RSA) public and private key pair. When one account wants to transfers some value to other account, new line is added into shared immutable audit log called blockchain. You can imagine blockchain as a finite shared excel sheet where each new transaction appends to next empty row. The transaction from wallet A to wallet B is signed by wallet's A private key while containing encrypted wallet's B public key and added to shared public ledger (audit log also called blockchain). Transactions cannot be canceled they cannot be forwarded and they are constrained to that single file starting from line 0 called "genesis block" creating Nostro wallet representing the system itself. Previously I said that the blockchain contains finite number of rows this is correct to imagine and realise there is finite number of transactions that could be done starting with given genesis block, but is not factually true. In reality that excel sheet has 2 rows at the beginning and new free rows are appended on background, this is called "mining" and there are different approaches to how these rows are created. For example in BTC or LTC type blockchain mechanism called "proof-of-work" is being used, for this shared file to be trusted, it must be impossible (from thermodynamics and physics perspective) to forge those rows and rewrite history, each row contains attribute containing solution to hard math problem, imagine finding large prime numbers, that way everyone can trust that even if the file is public and shared by all, no single entity is able to rewrite history, change balances, resign transactions and publish modified blockchain or forge new blocks. Because this mechanims is costly by principle and because the mining needs to be running at least in a scale where there are always at least one more free block to write next transaction into so the whole system does not halt, every transaction contains fee that goes towards genesis wallet's balance and from that block sucessful addition of new free block yields credit to that wallet which published that block into public blockchain. The more transactions there are in the system the bigger the blockchain grows, more wallets there are in the system the number of wallets that needs to download that blockchain to have local copy grows. There is limited supply of credits (also called tokens) defined at the definition of genesis block. Whatever that block has as a balance, thats the overall number of tokens that will exist in that system. And one day where there are no new free rows to add transaction or size of blockchain is larger than any existing storage capacity the whole system haults. The idea behind blockchain and BTC specifically was that everyone will spin its own genesis block at the time when he/she needs to transfer value anonymously and once that is confirmed the blochain would be scrapped. Thats the decentralised and distributed part from the whitepaper of cryptocurrencies, the actual usage of blockchains is as a store of value, centralised and traded as a valuta with shared public ledger that everyone needs to use, it is non distributed shared ledger with number of credits backed by real value in fiat currency or valuta, crypto coin by itself does not represent any value, it represents auditable entry of IOU.

### Evaluation

Both of these approaches are "wall-to-wall" and none of those provide stable sustainable and constant behaviour that does not degrade with number of accounts, number of transfers or size of the mesh.

This project aims to solve this singular problem with focusing and "reinventing" approaches step by step building foundational and extensible solution that is distributed, trustful, scaleable and can run unattended for several years of decades by design.

It consists of [three services](services-core) focusing on core value transfer functionality and [three services](services-usecase) showing examples of advanced usecases.

There is no shame in reinventing wheel if it is square, but this IS large problem because we are working with data that must represent feasable and spendeable value in unattended distributed and autonomous system, CAP theorem is a real thing.

Quite often the biggest problems and hardest problems are solved by connecting and interweaving solutions that are not that big or hard when working by themself.
